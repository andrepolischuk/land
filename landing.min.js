// Landing Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/landing
!function(a){"use strict";var b=document.body.getAttribute("data-landing"),c=document.body.getAttribute("data-landing-nav"),d="active";if(!b)return!1;var e,f={x:{attr:"data-landing-x",prop:"transform",def:0,ext:"px",func:"translateX"},y:{attr:"data-landing-y",prop:"transform",def:0,ext:"px",func:"translateY"},scale:{attr:"data-landing-scale",prop:"transform",def:1,func:"scale"},rotate:{attr:"data-landing-rotate",prop:"transform",def:0,ext:"deg",func:"rotate"},opacity:{attr:"data-landing-opacity",def:1,prop:"opacity"}},g=[];for(var h in f)f.hasOwnProperty(h)&&g.push("["+f[h].attr+"]");var i={transform:["-webkit-","-moz-","-ms-","-o-",""],opacity:["-moz-",""]},j="data-landing-delay",k={},l={};l.on=function(a,b){"function"!=typeof k[a]&&"function"==typeof b&&(k[a]=b)};var m=l.sections=document.querySelectorAll(b),n=l.nav=c?document.querySelector(c):a,o=function(a,b){for(var c,d,e,h,k,l,m,n={},o=a.querySelectorAll(g.join(",")),p=0;p<o.length;p++){n={},l=o[p],m=l.getAttribute(j);for(var q in f)if(f.hasOwnProperty(q)&&(h=f[q],c=l.getAttribute(h.attr))){c=parseFloat(c),m=parseFloat(m)||0,d=h.def,e=c+(d-c)*(m>b?0:b-1+(b-m)/(1-m)),e+=h.ext||"",e="opacity"===q?e:h.func+"("+e+")";for(var r=0;r<i[h.prop].length;r++)k=i[h.prop][r]+h.prop,n[k]=n[k]?n[k]+" "+e:e}for(var s in n)n.hasOwnProperty(s)&&(l.style[s]=n[s])}},p=function(){for(var c,f,g,h,i,a=0,b=window.pageYOffset||document.documentElement.scrollTop,j=0;j<m.length;j++)i=m[j],g=i.offsetHeight,f=i.offsetTop,c=f+g,b>=f&&c>=b&&(a=j,h=(b-f)/g),f>=b+g?o(i,0):b+g>f&&c>b+g?o(i,h):b+g>=c&&o(i,1);if(a!==e){if(e=a,n){var l=n.querySelector("."+d);l&&(l.className=l.className.replace(new RegExp("("+d+")","gi"),"")),n.children[e].className+=" active"}"function"==typeof k.change&&k.change(e)}};"addEventListener"in window&&window.addEventListener("scroll",p,!1),p(),"function"==typeof define&&define.amd?define([],function(){return l}):"undefined"!=typeof module&&module.exports?module.exports=l:this.landing=l}.call(this);
