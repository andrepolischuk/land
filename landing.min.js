// Landing Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/landing
!function(a){"use strict";var b=document.body.getAttribute("data-landing"),c=document.body.getAttribute("data-landing-nav"),d="active";if(!b)return!1;var e,f={x:{attr:"landing-x",prop:"transform",def:0,ext:"px",func:"translateX"},y:{attr:"landing-y",prop:"transform",def:0,ext:"px",func:"translateY"},scale:{attr:"landing-scale",prop:"transform",def:1,func:"scale"},rotate:{attr:"landing-rotate",prop:"transform",def:0,ext:"deg",func:"rotate"},opacity:{attr:"landing-opacity",def:1,prop:"opacity"}},g=[];for(var h in f)f.hasOwnProperty(h)&&g.push("["+f[h].attr+"]");var i={transform:["-webkit-","-moz-","-ms-","-o-",""],opacity:["-moz-",""]},j={},k={};k.on=function(a,b){"function"!=typeof j[a]&&"function"==typeof b&&(j[a]=b)};var l=k.sections=document.querySelectorAll(b),m=k.nav=c?document.querySelector(c):a,n=function(a,b){for(var c,d,e,h,j,k,l={},m=a.querySelectorAll(g.join(",")),n=0;n<m.length;n++){l={},k=m[n];for(var o in f)if(f.hasOwnProperty(o)&&(h=f[o],c=k.getAttribute(h.attr))){c=parseInt(c),d=h.def,e=c+(d-c)*b,e+=h.ext||"",e="opacity"===o?e:h.func+"("+e+")";for(var p=0;p<i[h.prop].length;p++)j=i[h.prop][p]+h.prop,l[j]=l[j]?l[j]+" "+e:e}for(var q in l)l.hasOwnProperty(q)&&(k.style[q]=l[q])}},o=function(){for(var c,f,g,h,i,a=0,b=window.pageYOffset||document.documentElement.scrollTop,k=0;k<l.length;k++)i=l[k],g=i.offsetHeight,f=i.offsetTop,c=f+g,b>=f&&c>=b&&(a=k,h=(b-f)/g),f>=b+g?n(i,0):b+g>f&&c>b+g?n(i,h):b+g>=c&&n(i,1);if(a!==e){if(e=a,m){var o=m.querySelector("."+d);o&&(o.className=o.className.replace(new RegExp("("+d+")","gi"),"")),m.children[e].className+=" active"}"function"==typeof j.change&&j.change(e)}};"addEventListener"in window&&window.addEventListener("scroll",o,!1),o(),window.landing=k}();