// Landing Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/landing
!function(a){"use strict";var b=document.body.getAttribute("data-landing"),c=document.body.getAttribute("data-landing-nav"),d="active";if(!b)return!1;var e,f=function(a,b){var c;if("length"in a)for(c=0;c<a.length;c++)b(a[c],c);else for(c in a)a.hasOwnProperty(c)&&b(a[c],c)},g={x:{attr:"data-landing-x",prop:"transform",def:0,ext:"px",func:"translateX"},y:{attr:"data-landing-y",prop:"transform",def:0,ext:"px",func:"translateY"},scale:{attr:"data-landing-scale",prop:"transform",def:1,func:"scale"},rotate:{attr:"data-landing-rotate",prop:"transform",def:0,ext:"deg",func:"rotate"},opacity:{attr:"data-landing-opacity",def:1,prop:"opacity"}},h=[];f(g,function(a){h.push("["+a.attr+"]")});var i={transform:["-webkit-","-moz-","-ms-","-o-",""],opacity:["-moz-",""]},j="data-landing-delay",k={},l={};l.on=function(a,b){"function"!=typeof k[a]&&"function"==typeof b&&(k[a]=b)};var m=l.sections=document.querySelectorAll(b),n=l.nav=c?document.querySelector(c):a,o=function(a,b){var c,d,e,k,l,m,n={},o=a.querySelectorAll(h.join(","));f(o,function(a){n={},m=a.getAttribute(j),f(g,function(g,h){k=g,c=a.getAttribute(k.attr),c&&(c=parseFloat(c),m=parseFloat(m)||0,d=k.def,e=c+(d-c)*(m>b?0:b-1+(b-m)/(1-m)),e+=k.ext||"",e="opacity"===h?e:k.func+"("+e+")",f(i[k.prop],function(a){l=a+k.prop,n[l]=n[l]?n[l]+" "+e:e}))}),f(n,function(b,c){a.style[c]=b})})},p=function(){var c,g,h,i,a=0,b=window.pageYOffset||document.documentElement.scrollTop;if(f(m,function(d,e){h=d.offsetHeight,g=d.offsetTop,c=g+h,b>=g&&c>=b&&(a=e,i=(b-g)/h),g>=b+h?o(d,0):b+h>g&&c>b+h?o(d,i):b+h>=c&&o(d,1)}),a!==e){if(e=a,n){var j=n.querySelector("."+d);j&&(j.className=j.className.replace(new RegExp("("+d+")","gi"),"")),n.children[e].className+=" active"}"function"==typeof k.change&&k.change(e)}};"addEventListener"in window&&window.addEventListener("scroll",p,!1),p(),"function"==typeof define&&define.amd?define([],function(){return l}):"undefined"!=typeof module&&module.exports?module.exports=l:this.landing=l}.call(this);
