// Landing Â© 2014 Andrey Polischuk
// https://github.com/andrepolischuk/landing
!function(t){"use strict"
var e=document.body.getAttribute("data-landing"),n=document.body.getAttribute("data-landing-nav"),r="active"
if(!e)return!1
var a,o={x:{attr:"landing-x",prop:"transform",def:0,ext:"px",func:"translateX"},y:{attr:"landing-y",prop:"transform",def:0,ext:"px",func:"translateY"},scale:{attr:"landing-scale",prop:"transform",def:1,func:"scale"},rotate:{attr:"landing-rotate",prop:"transform",def:0,ext:"deg",func:"rotate"},opacity:{attr:"landing-opacity",def:1,prop:"opacity"}},i=[]
for(var c in o)o.hasOwnProperty(c)&&i.push("["+o[c].attr+"]")
var f={transform:["-webkit-","-moz-","-ms-","-o-",""],opacity:["-moz-",""]},p={},l=document.querySelectorAll(e),d=n?document.querySelector(n):t,s={}
s.on=function(t,e){"function"!=typeof p[t]&&"function"==typeof e&&(p[t]=e)}
var u=function(t,e){for(var n,r,a,c,p,l,d={},s=t.querySelectorAll(i.join(",")),u=0;u<s.length;u++){d={},l=s[u]
for(var g in o)if(o.hasOwnProperty(g)&&(c=o[g],n=l.getAttribute(c.attr))){n=parseInt(n),r=c.def,a=n+(r-n)*e,a+=c.ext||"",a="opacity"===g?a:c.func+"("+a+")"
for(var y=0;y<f[c.prop].length;y++)p=f[c.prop][y]+c.prop,d[p]=d[p]?d[p]+" "+a:a}for(var m in d)d.hasOwnProperty(m)&&(l.style[m]=d[m])}},g=function(){for(var t,e,n,o,i,c=0,f=window.pageYOffset||document.documentElement.scrollTop,s=0;s<l.length;s++)i=l[s],n=i.offsetHeight,e=i.offsetTop,t=e+n,f>=e&&t>=f&&(c=s,o=(f-e)/n),e>=f+n?u(i,0):f+n>e&&t>f+n?u(i,o):f+n>=t&&u(i,1)
if(c!==a){if(a=c,d){var g=d.querySelector("."+r)
g&&(g.className=g.className.replace(RegExp("("+r+")","gi"),"")),d.children[a].className+=" active"}"function"==typeof p.change&&p.change(a)}}
"addEventListener"in window&&window.addEventListener("scroll",g,!1),g(),window.landing=s}()