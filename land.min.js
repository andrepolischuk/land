// Land Â© 2014-2015 Andrey Polischuk github.com/andrepolischuk/land
!function(){"use strict";function c(a,b){var c;if("length"in a)for(c=0;c<a.length;c++)b(a[c],c);else for(c in a)a.hasOwnProperty(c)&&b(a[c],c)}function k(a,b){var h,i,j,k,l,m,n={},o=a.querySelectorAll(e.join(","));c(o,function(a){n={},m=a.getAttribute(g),c(d,function(d,e){k=d,h=a.getAttribute(k.attr),h&&(h=parseFloat(h),m=parseFloat(m)||0,i=k.def,j=h+(i-h)*(m>b?0:b-1+(b-m)/(1-m)),j+=k.ext||"",j="opacity"===e?j:k.func+"("+j+")",c(f[k.prop],function(a){l=a+k.prop,n[l]=n[l]?n[l]+" "+j:j}))}),c(n,function(b,c){a.style[c]=b})})}function l(){var e,f,g,i,l,a=0,d=window.pageYOffset||document.documentElement.scrollTop;c(j,function(b,c){i=b.offsetHeight,g=b.offsetTop,f=g+i,e=d+i,d>=g&&f>=d&&(a=c,l=(d-g)/i),g>=e?k(b,0):e>g&&f>e?k(b,l):e>=f&&k(b,1)}),a!==b&&(b=a,"function"==typeof h.change&&h.change(b))}var a=document.body.getAttribute("data-land");if(a){var b,d={x:{attr:"data-land-x",prop:"transform",def:0,ext:"px",func:"translateX"},y:{attr:"data-land-y",prop:"transform",def:0,ext:"px",func:"translateY"},scale:{attr:"data-land-scale",prop:"transform",def:1,func:"scale"},rotate:{attr:"data-land-rotate",prop:"transform",def:0,ext:"deg",func:"rotate"},opacity:{attr:"data-land-opacity",def:1,prop:"opacity"}},e=[];c(d,function(a){e.push("["+a.attr+"]")});var f={transform:["-webkit-","-moz-","-ms-","-o-",""],opacity:["-moz-",""]},g="data-land-delay",h={},i={};i.on=function(a,b){"function"!=typeof h[a]&&"function"==typeof b&&(h[a]=b)};var j=i.sections=document.querySelectorAll(a);"addEventListener"in window&&window.addEventListener("scroll",l,!1),l(),"function"==typeof define&&define.amd?define([],function(){return i}):"undefined"!=typeof module&&module.exports?module.exports=i:this.land=i}}.call(this);
